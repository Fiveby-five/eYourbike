# eYourbike
一套电动化你的自行车的工具，包括了电机套件，电池套件，智能终端套件，以及机械套件。具有低成本，适应大多数自行车，高效率，客制化的特点。
A full set for equip your bike. Including motor set, battery managing set, smart terminal set and mechanical set. All hardware and software will be placed here

# 简介/Introducing
  最近我从上海搬到了柏林开始新的工作，这里的电动自行车选择实在是太少了，又贵又不咋地。所以我打算启动这个项目。该项目总体包括三个部分，一是机械部分，主要是起到传动，固定整个套件的作用。二是电气部分，包括电池管理，电源总管理，电机驱动，动能回收四个部分。三是软件部分，软件应该具有以下功能，一是基础的传感器数据收集反馈，二是电机的运动控制包括基础的驱动控制，动能回收启停，三是系统层次的电力管理，电池温度管理，四是智能交互。  
  该项目将会具有以下特性：  
  **高度客制化，高适应性**  
  **模块化设计，可配置并组合各个零件**  
  **高达0.5C的充电速度**  
  **完善的安全措施，电池安全管理和电机紧急开路**  
  **动能回收系统**  
  **智能化，与你的智能设备联动**  

# 机械设计
  本项目的机械部分我会尽量地使用3D打印制作，以最大化降低成本，为了适配性和传动效率，将选择链传动和同步带传动以适配不同的工作情况。机械部分主要为电池模组外壳及挂载套件，电机及驱动挂载套件，牙盘适配器，传感器挂载套件。我将设计不同配置的机械组件，例如不同的电机功率，不同的牙盘尺寸的适配器，不同电压和容量的电池模块等。   
  其次机械部分应该具有**全天候能力**，以在不同天气和环境下保护内部设备。  
  **TBD**  
  
# 电气部分
  电气部分将是本项目的重点，首先是电池管理模块，考虑到安全性问题，我只会设计使用磷酸铁锂电池（LiFeP4)的电池模块，设计电压为36V和72V两种。  
  以下是电气部分架构图：  <img width="730" alt="{1CC823F9-7E03-422D-958A-7BCBED5B54A1}" src="https://github.com/user-attachments/assets/89a6fc43-7e76-4989-8376-16e244eeaed3" />  

  对于**充放电模块**的设计，考虑到我没有独立设计开关电源的能力，因此我计划直接使用现成的开关电源提供DC供电，主控使用esp32C3，该MCU能够直接产生PWM信号调节充电占空比，且具有ADC引脚能够测量电压，使用厚膜电阻进行采样，低容量时使用恒流充电，接近充满时候使用恒压充电模式，且具有通信接口与平衡模块进行通信，通过串口与上位MCU通信。同时应具有温度监测功能，考虑到ESP32C3的I2C通道仅有一个，因此将使用I2C多路转换IC，以监控多个传感器。  
  对于**电机驱动器**的设计，我计划使用开源的FOC驱动板，并进行改进，该驱动器应该是有感的，以霍尔信号反馈为主，其次具有I2C传感器（如MT6701）接口，以适配更多电机。其次应该具有接受上位机信号的功能，包括速度指令，刹车指令，紧急开路指令，以及反馈信息给上位机的功能。主控计划采用ESP32S3，该MCU性能更为强大，且GPIO丰富。**TBD**  
  对于**主控及电源管理**的设计，主控计划采用ESP32S3，电源管理部分集成在主控板上。这一部分将管理整个组件，应该具有高电流通过性，高可靠性。该控制板包括了交互部分，初步计划使用简单的可变电阻控制速度，一个简单的OLED屏幕和操作按钮，由于我在ui设计和上层软件设计上没有经验，所以我决定只添加几个简单功能，应急开路，速度控制扳手，定速巡航开关，当前速度显示，
  
  
  
  
